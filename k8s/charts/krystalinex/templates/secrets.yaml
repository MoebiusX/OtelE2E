# Secrets template - DO NOT commit real values!
# For production, use sealed-secrets or external-secrets operator
{{- if .Values.secrets.create }}
apiVersion: v1
kind: Secret
metadata:
  name: krystalinex-secrets
  labels:
    {{- include "krystalinex.labels" . | nindent 4 }}
type: Opaque
stringData:
  database-url: {{ printf "postgresql://exchange:CHANGE_ME@%s-postgresql:5432/crypto_exchange" (include "krystalinex.fullname" .) | quote }}
  rabbitmq-url: {{ printf "amqp://admin:CHANGE_ME@%s-rabbitmq:5672" (include "krystalinex.fullname" .) | quote }}
  jwt-secret: "CHANGE_ME_GENERATE_SECURE_SECRET"
---
apiVersion: v1
kind: Secret
metadata:
  name: krystalinex-db-secrets
  labels:
    {{- include "krystalinex.labels" . | nindent 4 }}
type: Opaque
stringData:
  postgres-password: "CHANGE_ME"
  password: "CHANGE_ME"
---
apiVersion: v1
kind: Secret
metadata:
  name: krystalinex-kong-secrets
  labels:
    {{- include "krystalinex.labels" . | nindent 4 }}
type: Opaque
stringData:
  postgres-password: "CHANGE_ME"
  password: "CHANGE_ME"
---
apiVersion: v1
kind: Secret
metadata:
  name: krystalinex-rabbitmq-secrets
  labels:
    {{- include "krystalinex.labels" . | nindent 4 }}
type: Opaque
stringData:
  rabbitmq-password: "CHANGE_ME"
{{- end }}
